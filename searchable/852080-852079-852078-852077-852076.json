[
 {
  "author": "cmpilato", 
  "date": "2004-11-23T20:02:33.995753Z", 
  "msg": [
   "Finish issue #2124 -- bugs in svn switch over ra-dav.", 
   "The history of this change is complicated, but goes something like", 
   "this:", 
   "Once upon a time there were two lovers, each Subversion-y, each of", 
   "1.0 caliber.  One was a server; the other, a client.  These two", 
   "transmitted messages over the internet (sometimes using secret", 
   "codes, even) in order to coordinate the development of their", 
   "budding relationship.  Each had flaws, but both simply avoided", 
   "activities which brought the others' flaw to light.", 
   "Then one day, the client met a man named Greg Hudson.  Now, this", 
   "fellow was exceedingly intelligent, with an eye for simplifying the", 
   "lives of those around him.  With good intent, he encouraged the", 
   "client to begin improving her flaws, while exploring the formerly", 
   "untrodden paths in the her relationship with the server.  The", 
   "server responded to this new direction also with good intent -- but", 
   "alas, with imperfection.  His flaws were brought to light, not as", 
   "obvious evils, but as a subtle sort of destruction, as the dryrot", 
   "of a rubber band is hidden until the band is stretched.  The result", 
   "was perplexing and disappointing -- the land was stained with", 
   "invalid working copy props far and near.", 
   "Something had to be done.", 
   "This change should be evaluated in conjunction with r9705 and r9698,", 
   "in which the client was changed to begin driving the server in a way", 
   "it wasn't prepared to handle.", 
   "* subversion/mod_dav_svn/update.c", 
   "(update_ctx_t): Add 'target' member.", 
   "(item_baton_t): Add 'parent' member.", 
   "(make_child_baton): Populate the 'parent' member of the", 
   "item_baton_t.  And calculate path3 more accurately in the presence", 
   "of a target.", 
   "(dav_svn__update_report): Populate the 'target' member of the", 
   "update_ctx_t baton, and drive the resource walk based on the", 
   "anchor, not the target.  (Also, prep the code a little better for", 
   "the removal of the \"only do resource walks for dirs\" condition,", 
   "which needn't exist once clients learn to deal.)", 
   "* subversion/libsvn_ra_dav/fetch.c", 
   "(start_element): Revert the r9705 change -- accept the resource path", 
   "as given to us from the server (and so go back to expecting the", 
   "server to drive the resource walk relative to the anchor)."
  ], 
  "revision_id": "852080"
 }, 
 {
  "author": "jerenkrantz", 
  "date": "2004-11-23T19:49:53.200974Z", 
  "msg": [
   "Use APR's apr_env_get instead of getenv() to protect portability.", 
   "* subversion/libsvn_subr/config_file.c", 
   "(svn_config__user_config_path): Use apr_env_get instead of getenv()."
  ], 
  "revision_id": "852079"
 }, 
 {
  "author": "sussman", 
  "date": "2004-11-23T19:47:01.851717Z", 
  "msg": [
   "Locking branch:  four scripts of hookness, and in the wrappers... call them.", 
   "* include/svn_repos.h", 
   "(svn_repos_fs_get_locks): new wrapper declaration, takes authz_read callback.", 
   "(svn_repos_fs_lock):  whoops, fix return type in declaration.", 
   "(svn_repos_pre_lock_hook, svn_repos_pre_unlock_hook,", 
   "svn_repos_post_lock_hook, svn_repos_post_unlock_hook): new declarations.", 
   "* libsvn_repos/repos.h", 
   "(SVN_REPOS__HOOK_PRE_LOCK, SVN_REPOS__HOOK_POST_LOCK,", 
   "SVN_REPOS__HOOK_PRE_UNLOCK, SVN_REPOS__HOOK_POST_UNLOCK): new constants.", 
   "(svn_repos__hooks_pre_lock, svn_repos__hooks_post_lock,", 
   "svn_repos__hooks_pre_unlock, svn_repos__hooks_post_unlock): new decl'ns.", 
   "* libsvn_repos/repos.c", 
   "(svn_repos_pre_lock_hook, svn_repos_pre_unlock_hook,", 
   "svn_repos_post_lock_hook, svn_repos_post_unlock_hook): new funcs.", 
   "(create_hooks):  four new templates for the new hooks.", 
   "* libsvn_repos/hooks.c", 
   "(svn_repos__hooks_pre_lock, svn_repos__hooks_post_lock,", 
   "svn_repos__hooks_pre_unlock, svn_repos__hooks_post_unlock): new funcs.", 
   "* libsvn_repos/fs-wrap.c", 
   "(svn_repos_fs_lock):        new wrapper func.  calls new hooks.", 
   "(svn_repos_fs_unlock):      new wrapper func.  calls new hooks.", 
   "(svn_repos_fs_get_locks):   new wrapper func:  not yet filled in."
  ], 
  "revision_id": "852078"
 }, 
 {
  "author": "cmpilato", 
  "date": "2004-11-23T18:23:17.332136Z", 
  "msg": [
   "Cleanup junk related to cross-repository copies.  The mod_dav_svn code", 
   "was rather permissive, and the result on a BDB-backed repos was that", 
   "the destination repository required recovery after the failed commit.", 
   "* subversion/libsvn_fs_base/tree.c", 
   "(copy_helper): New function to abstract common parts of", 
   "base_revision_link() and base_copy().  Also, assert that the", 
   "to_root and from_root refer to the same FS object.  Finally move a", 
   "root check from txn_body_copy() into here to prevent unnecessary", 
   "Berkeley DB transaction setup and teardown in this error", 
   "situation.", 
   "(txn_body_copy): Move a root check into new copy_helper().", 
   "(base_revision_link, base_copy): Just wrap the new copy_helper() now.", 
   "* subversion/libsvn_fs_fs/tree.c", 
   "(copy_helper): Assert that the to_root and from_root refer to the", 
   "same FS object.", 
   "* subversion/include/svn_fs.h", 
   "(svn_fs_delete): Update the docstring to state that to_root and", 
   "from_root must be from the same filesystem.", 
   "* subversion/mod_dav_svn/repos.c", 
   "(dav_svn_copy_resource): Complain if the copy source and destination", 
   "are from different repositories (based on a comparison of the", 
   "absolute paths of the repository locations)."
  ], 
  "revision_id": "852077"
 }, 
 {
  "author": "cmpilato", 
  "date": "2004-11-23T17:53:50.463149Z", 
  "msg": [
   "Tired of writing the same kinda base code for custom pre-commit hooks,", 
   "I wanna save myself and others that effort.", 
   "* subversion/bindings/swig/python/svn/core.py", 
   "(svn_path_compare_paths): New.  Python version of the C function we", 
   "aren't exposing.", 
   "* contrib/hook-scripts/pre-commit-check.py", 
   "New template (a framework, if you will) for Python-bindings-based", 
   "pre-commit-hook checking scripts."
  ], 
  "revision_id": "852076"
 }
]