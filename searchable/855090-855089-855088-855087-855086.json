[
 {
  "author": "lundblad", 
  "date": "2005-06-09T21:29:10.955286Z", 
  "msg": [
   "Restore partly broken caching of copyfrom information in FSFS (broken by", 
   "r14333).  This fixes a big performance regression for svn log -v for revisions", 
   "with many files added without history.", 
   "* subversion/libsvn_fs_fs/tree.c (struct fs_root_data_t): Document how", 
   "copyfrom info is stored in the copyfrom_cache field.", 
   "* subversion/libsvn_fs_fs/fs_fs.c (fold_change): Represent \"add without", 
   "history\" as the empty string instead of NULL, since that's what", 
   "fs_copied_from expects."
  ], 
  "revision_id": "855090"
 }, 
 {
  "author": "lundblad", 
  "date": "2005-06-09T19:34:15.387535Z", 
  "msg": [
   "Fix issue #960, separate repository root URL from FS path in working", 
   "copy entries.", 
   "This makes sure that newly checked out WCs get this information, and also tries", 
   "to add the information to old working copies on update.", 
   "NOTE: This fix adds the information, but doesn't make much use of it.  It does,", 
   "however try to prevent the URL and copyfrom URL from mismatching the", 
   "repository root.  Also, svn_wc_relocate is taught not to change the FS path", 
   "URL part of the entries.", 
   "* subversion/include/svn_path.h (svn_path_is_ancestor): Declare.", 
   "* subversion/include/svn_wc.h", 
   "(svn_wc_ensure_adm2, svn_wc_maybe_set_repos_root): Declare.", 
   "(svn_wc_ensure_adm): Deprecate.", 
   "* subversion/libsvn_wc/relocate.c (relocate_entry): Don't rewrite any URLs", 
   "if the FROM argument matches outside the repository root URL.  Rewrite the", 
   "repos root URL.", 
   "* subversion/libsvn_wc/entries.c", 
   "(svn_wc__entries_init): Take repos argument and set repository root to that", 
   "if non-NULL.  Fix comment.", 
   "(svn_wc__atts_to_entry): Fetch repository root.", 
   "(take_from_entry): Inherit repository root from this-dir entry.", 
   "(write_entry): Write repository root.", 
   "(fold_entry): Handle repository root.", 
   "(svn_wc__tweak_entry): Add repos argument.  Set repository root on entry if", 
   "that doesn't make the entries file corrupt.", 
   "* subversion/libsvn_wc/entries.h", 
   "(SVN_WC__ENTRY_ATTR_REPOS, SVN_WC__ENTRY_MODIFY_REPOS): New macros.", 
   "Reindent the other definitions to line up.", 
   "(svn_wc__entries_init): Add repos argument.", 
   "(svn_wc__tweak_entry): Add repos argument.", 
   "* subversion/libsvn_wc/adm_ops.c (tweak_entries): Add repos argument.", 
   "(svn_wc__do_update_cleanup): Add repos argument.", 
   "(svn_wc_maybe_set_repos_root): New function.", 
   "(svn_wc_add2): Return error if the copyfrom url has different repository", 
   "root than its new parent.  (The user can't commit such a copy anyway).", 
   "Use svn_wc_ensure_amd2() instead of the deprecated function, making the new", 
   "directory have a repository root in its entry.  Pass repository root to", 
   "svn_wc__do_update_cleanup().  Indentation fixes.", 
   "* subversion/libsvn_wc/adm_files.c (init_adm): Add repos argument, passing it", 
   "to svn_wc__entries_init().", 
   "(svn_wc_ensure_adm2): New function, copied from svn_wc_ensure_adm(); handle", 
   "new repos argument.", 
   "(svn_wc_ensure_adm): Wrap svn_wc_ensure_adm2().", 
   "* subversion/libsvn_wc/adm_ops.h (svn_wc__do_update_cleanup): Add repos", 
   "argument.", 
   "* subversion/libsvn_wc/update_editor.c (struct edit_baton): Add repos member.", 
   "(prep_directory): Set the repository root if available.", 
   "(open_root, open_directory): Set repository root when making entry", 
   "incomplete.", 
   "(close_edit): Pass repository root to svn_wc__do_update_cleanup().", 
   "(make_editor): Fetch repository root from the anchro, if available and put", 
   "it in the edit baton.", 
   "(svn_wc_add_repos_file): Ensure that the copyfrom URL matches the repository", 
   "root of the new parent.", 
   "* subversion/libsvn_subr/path.c (svn_path_is_ancestor): New function.", 
   "* subversion/libsvn_client/info.c (build_info_from_entry): Add the", 
   "enty's repository root to the info struct if available.", 
   "* subversion/libsvn_client/checkout.c (svn_client__checkout_internal): Get the", 
   "repository root from the RA session and use it when creating a new WC root", 
   "directory.", 
   "* subversion/libsvn_client/update.c (svn_client__update_internal): Try to set", 
   "the repository root of the target entry.", 
   "* subversion/tests/clients/cmdline/basic_tests.py (repos_root): New test.", 
   "(test_list): Run it.", 
   "* subversion/tests/clients/cmdline/merge_tests.py (merge_dir_branches): Adjust", 
   "expected output for info command to allow a repository root."
  ], 
  "revision_id": "855089"
 }, 
 {
  "author": "pburba", 
  "date": "2005-06-09T15:20:26.937453Z", 
  "msg": [
   "Port of svn info via file:/// for OS/400.", 
   "* subversion/clients/cmdline/info-cmd.c", 
   "Include svn_utf.h and svn_ebcdic.h", 
   "(svn_cl__info_print_time, print_info, svn_cl__info): Use SVN_CMDLINE_PRINTF2", 
   "rather than svn_cmdline_printf to allow utf-8 var args.", 
   "* subversion/libsvn_ra_local/ra_plugin.c", 
   "Include svn_ebcdic.h", 
   "(svn_ra_local__do_check_path): Replace string literal with SVN_UTF8_* symbol.", 
   "(get_node_props):  Use APR_PSPRINTF2 rather than apr_psprintf to allow utf-8", 
   "var args.  This replaces older, messier approach which predates", 
   "APR_PSPRINTF2."
  ], 
  "revision_id": "855088"
 }, 
 {
  "author": "pburba", 
  "date": "2005-06-08T20:35:33.828071Z", 
  "msg": [
   "Port of svn ls via file:/// for OS/400.", 
   "Note: When using the --xml option, output is in utf-8.", 
   "* subversion/clients/cmdline/ls-cmd.c", 
   "Include svn_utf.h and svn_ebcdic.h", 
   "(AUTHOR_STR):", 
   "(ENTRY_STR):", 
   "(COMMIT_STR):", 
   "(DATE_STR):", 
   "(DIR_STR):", 
   "(FILE_STR):", 
   "(KIND_STR):", 
   "(LIST_STR):", 
   "(LISTS_STR):", 
   "(NAME_STR):", 
   "(PATH_STR):", 
   "(REVISION_STR):", 
   "(SIZE_STR):", 
   "New ascii escaped symbolic constants.", 
   "(print_dirents):", 
   "Use APR_PSPRINTF2 and SVN_CMDLINE_PRINTF2 rather than apr_psprintf and", 
   "svn_cmdline_printf to allow utf-8 var args.  Replace char literals with", 
   "SVN_UTF8_* symbolic contstants.", 
   "(kind_str):", 
   "(print_header_xml):", 
   "(print_footer_xml):", 
   "Replace string literals with new symbols.", 
   "(print_dirents_xml): Use new symbols and APR_PSPRINTF2."
  ], 
  "revision_id": "855087"
 }, 
 {
  "author": "pburba", 
  "date": "2005-06-08T20:15:47.292038Z", 
  "msg": [
   "Port of svn diff via file:/// for OS/400.", 
   "Disabled the --diff-cmd and -x options as we have no plans to support those", 
   "in the port.  Also fixed a bug introduced in the svn merge port (r14988)", 
   "where APR_CHARSET_EBCDIC and !APR_CHARSET_EBCDIC dependent code blocks were", 
   "accidentally reversed from what was intended.  This in turn masked the", 
   "fact that the ebcdic port code had an compilation error.  I plead a massive", 
   "brain cramp on this one...", 
   "Note: All output from svn diff is in utf-8, the thinking being that it is", 
   "typically redirected to a file.", 
   "* subversion/clients/cmdline/main.c", 
   "(svn_cl__cmd_table): Disable --diff-cmd and -x for svn diff.", 
   "(main): Convert --new and --old args to utf-8.", 
   "* subversion/libsvn_client/diff.c", 
   "(display_prop_diffs): Correct APR_CHARSET_EBCDIC #if, #else, #endif blocks."
  ], 
  "revision_id": "855086"
 }
]