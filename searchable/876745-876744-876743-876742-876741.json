[
 {
  "author": "gstein", 
  "date": "2009-03-19T11:37:54.318724Z", 
  "msg": [
   "Constify the STATUS parameter in the status callback so that we can better", 
   "understand/verify where a status structure is created and/or modified.", 
   "This bumps the callback to \"func4\" with dependent bumps in the client and", 
   "wc status driver functions to take the updated type. Also separated the", 
   "single pool argument of svn_wc_get_status_editor5 into a result/scratch", 
   "pair (tho scratch is unused so far).", 
   "This revision is a first pass to simply add the new functions, deprecate", 
   "the old, and provide minimal mapping. This allows us to first verify the", 
   "deprecated functions continue to work before continuing further.", 
   "Note: I'd like to revamp how we do status reporting, so it is possible", 
   "that this API bump will not survive to the end of 1.7 development. But it", 
   "is going to be hard for us to reason about the status infrastructure as", 
   "long as we throw around modifiable status structures.", 
   "* subversion/include/svn_wc.h:", 
   "(svn_wc_status_func4_t): new version of the callback which has a const", 
   "STATUS parameter.", 
   "(svn_wc_status_func3_t): mark as deprecated", 
   "(svn_wc_get_status_editor5): new version with updated function type and", 
   "split pool parameters.", 
   "(svn_wc_get_status_editor4): mark as deprecated", 
   "* subversion/include/svn_client.h:", 
   "(svn_client_status5): new version with updated function type", 
   "(svn_client_status4): mark as deprecated", 
   "* subversion/libsvn_wc/status.c:", 
   "(struct edit_baton): update type of STATUS_FUNC member", 
   "(send_status_structure, send_unversioned_item, get_dir_status,", 
   "handle_dir_entry, get_dir_status): update type of STATUS_FUNC", 
   "parameter.", 
   "(hash_stash): constify the STATUS parameter to turn this into a func4", 
   "(struct status_baton): update REAL_STATUS_FUNC to a func4", 
   "(mark_deleted): duplicate the incoming status in order to modify it", 
   "(handle_statii): update type of the STATUS_FUNC local var", 
   "(svn_wc_get_status_editor5): renamed/tweaked from the editor4", 
   "incarnation. adjusted the STATUS_FUNC type and split the pools.", 
   "adjusted calls to use RESULT_POOL instead of plain POOL.", 
   "(svn_wc_get_status_editor4): removed; reborn over in deprecated.c", 
   "* subversion/libsvn_wc/deprecated.c:", 
   "(struct status4_wrapper_baton): new struct to map across func callback", 
   "types.", 
   "(status4_wrapper_func): new callback function to map across the types by", 
   "duplicating the STATUS param into a modifiable value.", 
   "(svn_wc_get_status_editor4): new incarnation of this function,", 
   "implemented in terms of the new editor5 interface. important point is", 
   "to place the new baton onto the heap since it must survive as long as", 
   "the returned editor.", 
   "* subversion/libsvn_client/status.c:", 
   "(struct status_baton): bump REAL_STATUS_FUNC type to func4", 
   "(tweak_status): assume incoming STATUS param should not be touched, so", 
   "duplicate it before modifying its values. pass the modified version to", 
   "the real status function. note that tweak_status remains a func3", 
   "signature so that we can continue to use the editor4() interface.", 
   "(svn_client_status5): renamed/tweaked version of status4(). simply", 
   "bumped the STATUS_FUNC callback type.", 
   "(svn_client_status4): removed; reborn over in deprecated.c", 
   "* subversion/libsvn_client/deprecated.c:", 
   "(struct status4_wrapper_baton): same as wc/deprecated. a new struct to", 
   "map across callback types.", 
   "(status4_wrapper_func): same as wc/deprecated. a new func to map", 
   "callback types by duplicating the STATUS param.", 
   "(svn_client_status4): new incarnation of this function. a mapping baton", 
   "is held on the stack (since it has a short life) and is used to map", 
   "the callback type.", 
   "* subversion/libsvn_client/client.h:", 
   "(svn_client__do_external_status): bump type of STATUS_FUNC param.", 
   "* subversion/libsvn_client/externals.c:", 
   "(svn_client__do_external_status): bump type of STATUS_FUNC param, and", 
   "use the new svn_client_status5() in order to accept the new type"
  ], 
  "revision_id": "876745"
 }, 
 {
  "author": "gstein", 
  "date": "2009-03-19T10:08:40.271114Z", 
  "msg": [
   "Add a missing \"const\" in the status structures (callers should not have", 
   "been modifying the entry which is passed). Also, constify some other uses", 
   "of the status structure, and move two deprecated functions over to", 
   "deprecated.c.", 
   "* subversion/include/svn_wc.h:", 
   "(svn_wc_status2_t, svn_wc_status_t): mark the ENTRY member as const", 
   "* subversion/libsvn_wc/status.c:", 
   "(find_dir_url): mark STATUS local var as const", 
   "(make_dir_baton): mark THIS_DIR_STATUS as const", 
   "(svn_wc_status, svn_wc_dup_status): move to deprecated.c", 
   "* subversion/libsvn_wc/deprecated.c:", 
   "(svn_wc_status, svn_wc_dup_status): moved from status.c"
  ], 
  "revision_id": "876744"
 }, 
 {
  "author": "rhuijben", 
  "date": "2009-03-19T08:46:51.620767Z", 
  "msg": [
   "* STATUS: Update comment"
  ], 
  "revision_id": "876743"
 }, 
 {
  "author": "rhuijben", 
  "date": "2009-03-19T08:46:04.278063Z", 
  "msg": [
   "* STATUS: Nominate a few update_editor verification enhancements"
  ], 
  "revision_id": "876742"
 }, 
 {
  "author": "gstein", 
  "date": "2009-03-19T01:37:40.830327Z", 
  "msg": [
   "Constify some svn_wc_entry_t structures to clarify they aren't being used", 
   "for modification purposes. Tighten the scope of a few entry variables.", 
   "* subversion/libsvn_wc/crop.c:", 
   "(crop_children): constify the CURRENT_ENTRY local var", 
   "* subversion/libsvn_wc/adm_ops.c:", 
   "(tweak_entries): constify the CURRENT_ENTRY local var.", 
   "(process_committed_internal): constify the PARENT_ENTRY local var.", 
   "(revert_entry): move TMPENTRY from a heap pointer to a stack-based", 
   "structure, renaming to TMP_ENTRY per convention elsewhere. constify", 
   "the ENTRY_IN_PARENT local var.", 
   "(revert_internal): constify the CHILD_ENTRY local var", 
   "(svn_wc_remove_from_revision_control): constify the DIR_ENTRY local", 
   "* subversion/libsvn_wc/status.c:", 
   "(handle_statii): constify the DIR_ENTRY parameter", 
   "* subversion/libsvn_wc/update_editor.c:", 
   "(complete_directory): move CURRENT_ENTRY to a tighter local scope", 
   "* subversion/libsvn_wc/diff.c:", 
   "(path_driver_cb_func): constify the ENTRY local var", 
   "* subversion/libsvn_wc/copy.c:", 
   "(post_copy_cleanup): move ENTRY local var to a tighter scope"
  ], 
  "revision_id": "876741"
 }
]