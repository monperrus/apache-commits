[
 {
  "author": "gstein", 
  "date": "2008-11-12T10:57:56.311092Z", 
  "msg": [
   "Update the 600 line svn_wc__merge_internal. SIX HUNDRED LINES. It used", 
   "the old svn_io_open_unique_file2 seven times; these have been replaced by", 
   "calls to the new svn_io_open_uniquely_named(). We want the merge (unique)", 
   "files to have particular names.", 
   "* subversion/libsvn_wc/merge.c:", 
   "(svn_wc__merge_internal): switch to uniquely_named"
  ], 
  "revision_id": "874230"
 }, 
 {
  "author": "gstein", 
  "date": "2008-11-12T10:40:33.703181Z", 
  "msg": [
   "Switch some uses of svn_io_open_unique_file2 over to open_unique_file3.", 
   "One case of switching to svn_stream_open_unique.", 
   "* subversion/libsvn_wc/adm_files.c:", 
   "(svn_wc_create_tmp_file2): ...", 
   "* subversion/libsvn_wc/translate.c:", 
   "(svn_wc_translated_file2): ...", 
   "* subversion/libsvn_wc/diff.c:", 
   "(get_empty_file): ...", 
   "* subversion/libsvn_client/repos_diff.c:", 
   "(create_empty_file): ...", 
   "* subversion/libsvn_client/blame.c:", 
   "(file_rev_handler): ...", 
   "* subversion/libsvn_client/commit.c:", 
   "(send_file_contents): ...", 
   "* subversion/libsvn_ra_neon/util.c:", 
   "(parsed_request): ...", 
   "* subversion/libsvn_repos/reporter.c:", 
   "(svn_repos_begin_report2): ...", 
   "* subversion/libsvn_repos/dump.c:", 
   "(store_delta): ...", 
   "* subversion/libsvn_repos/hooks.c:", 
   "(create_temp_file): ... switch to use svn_io_open_unique_file3() and", 
   "simplify surrounding code, as appropriate.", 
   "* subversion/libsvn_client/export.c:", 
   "(struct file_baton): store a stream rather than a file", 
   "(window_handler): switch to svn_io_remove_file() since our path is in", 
   "the internal style, and not appropriate for passing to APR.", 
   "(apply_textdelta): open a unique stream rather than a file, and make", 
   "sure to disown it before passing it along to svn_txdelta_apply().", 
   "(close_file): close the stream, rather than the file.", 
   "(svn_client_export4): open a unique stream instead of a file."
  ], 
  "revision_id": "874229"
 }, 
 {
  "author": "gstein", 
  "date": "2008-11-12T10:27:47.234696Z", 
  "msg": [
   "Update the implementation of svn_io_open_uniquely_named(), document it,", 
   "and also document the new svn_io_open_unique_file3().", 
   "svn_io_open_unique_file2() is deprecated by svn_io_open_uniquely_named().", 
   "* subversion/include/svn_io.h:", 
   "(svn_io_open_uniquely_named): new function. docstring is derived from", 
   "the old svn_io_open_unique_file2() docco.", 
   "(svn_io_open_unique_file3): new function", 
   "(svn_io_open_unique_file2): deprecated", 
   "* subversion/libsvn_subr/io.c:", 
   "(svn_io_open_uniquely_named): update param names. do the right thing", 
   "when dirpath, filename, and/or suffix are NULL. allocate stuff in the", 
   "correct pool.", 
   "(svn_io_open_unique_file3): special handling for NULL dirpath is no", 
   "longer needed since uniquely_named does it now.", 
   "*subversion/libsvn_subr/stream.c:", 
   "(svn_stream_open_unique): simplify with svn_io_open_unique_file3."
  ], 
  "revision_id": "874228"
 }, 
 {
  "author": "neels", 
  "date": "2008-11-12T06:01:26.046584Z", 
  "msg": [
   "On branch tc-resolve:", 
   "Fix the behaviour of \"resolved\" that descends into unversioned", 
   "tree-conflicts even if the depth doesn't allow that.", 
   "* subversion/libsvn_wc/entries.c", 
   "(visit_tc_too_baton_t): Add TARGET and DEPTH fields.", 
   "(visit_tc_too_found_entry):", 
   "Use new TARGET and DEPTH fields in the baton to determine whether to", 
   "descend into unversioned tree-conflicted children of a directory.", 
   "(svn_wc__walk_entries_and_tc): Supply TARGET and DEPTH to the baton.", 
   "* subversion/tests/cmdline/tree_conflict_tests.py", 
   "(ensure_tree_conflict):", 
   "Make a \"resolved\" test also try run \"resolved\" on the victim's", 
   "parent first, to make sure it doesn't resolve its children.", 
   "Remove comment about not supporting \"resolved\" per victim.", 
   "* subversion/tests/cmdline/depth_tests.py", 
   "(tree_conflicts_resolved_depth_empty, tree_conflicts_resolved_depth_files,", 
   "tree_conflicts_resolved_depth_immediates,", 
   "tree_conflicts_resolved_depth_infinity, make_depth_tree_conflicts):", 
   "Four new tests and a helper. The tests are XFAIL because the helper", 
   "make_depth_tree_conflicts() exposes an error in update code that", 
   "is not related to \"resolved\". Separate trials suggest that these", 
   "tests will pass as soon as the update issue is resolved. See", 
   "inline comment in make_depth_tree_conflicts() marked \"##\".", 
   "(test_list): Add the new tests."
  ], 
  "revision_id": "874227"
 }, 
 {
  "author": "gstein", 
  "date": "2008-11-12T05:47:14.550561Z", 
  "msg": [
   "Fix the invocations of svn_io_write_unique(). The docstring states that a", 
   "directory path should be passed, but all callers were passing a file", 
   "pathname. This happened to work because of the internal implementation,", 
   "but broke after some refactoring.", 
   "Note: for now, the callers just use svn_path_dirname() to get the", 
   "directory name of whatever filepath they were about to pass. I assume", 
   "optimizations could be made later to have the dirpath handy.", 
   "Some internal changes were made to io.c as part of an upcoming change", 
   "around the (soon to be) deprecated svn_io_open_unique_file2() API. These", 
   "are documented here (insofar as they changed), but not in the API docs at", 
   "this time. It is these changes which discovered the bad call pattern to", 
   "svn_io_write_unique().", 
   "* subversion/libsvn_subr/io.c:", 
   "(svn_io_open_unique_file2): the implementation was renamed to ...", 
   "(svn_io_open_uniquely_named): ... this. the PATH parameter was broken up", 
   "into a directory path and the filename in that directory. the single", 
   "pool parameter was split into result and scratch pools. as a temp", 
   "measure, the old parameter names are now local variables,", 
   "reconstituted from the new params, in order to minimize change.", 
   "(svn_io_open_unique_file3): new function similar to", 
   "svn_stream_open_unique, but returns a plain file.", 
   "(svn_io_open_unique_file2): new implementation for the original", 
   "function, which simply calls svn_io_open_uniquely_named() with the", 
   "appropriate set of parameters.", 
   "(svn_io_open_unique_file): just param name changes. no functional change.", 
   "(svn_io_write_unique): simplify, in terms of svn_io_open_unique_file3.", 
   "(svn_io_file_move): add period to suffix in call to the", 
   "svn_io_open_unique_file2() function.", 
   "(svn_io_write_version_file): pass dirpath to svn_io_write_unique", 
   "* subversion/libsvn_subr/subst.c:", 
   "(create_special_file_from_stringbuf): ...", 
   "* subversion/libsvn_wc/props.c:", 
   "(maybe_generate_propconflict): ...", 
   "* subversion/libsvn_fs_fs/fs_fs.c:", 
   "(write_format, get_and_increment_txn_key_body, write_current): pass", 
   "dirpath to svn_io_write_unique"
  ], 
  "revision_id": "874226"
 }
]