[
 {
  "author": "nspiegelberg", 
  "date": "2011-11-17T01:44:30.704401Z", 
  "msg": [
   "Rename \"tab\" as \"tbl\"", 
   "Summary:", 
   "When open sourcing:", 
   "HBASE-4689 (Make the table level metrics work with rpc* metrics),", 
   "Nicolas had a good comments that the common abbreviation for table is \"tbl\"", 
   "instead of \"tab\"  (normally, cut out the vowels).", 
   "It would be nice to change if we're not dependent on this format yet.", 
   "Test Plan: Running all the unit tests now", 
   "Reviewers: kannan, mbautin, nspiegelberg", 
   "Reviewed By: kannan", 
   "CC: hbase-eng@lists, kannan", 
   "Differential Revision: 353246"
  ], 
  "revision_id": "1202980"
 }, 
 {
  "author": "nspiegelberg", 
  "date": "2011-11-17T01:44:12.502594Z", 
  "msg": [
   "D352964 Remove unnecessary DNS lookups from HBase master", 
   "Summary: D352964 Remove unnecessary DNS lookups from HBase master", 
   "In titan015, we hit the issue where upon each RS heartbeat we were looking up and resolving DNS name + address of the RS in the master, but needed it only for locality based assignment on startup. Part of oncall, so keeping ready to hotfix if needed (diff against MARS branch).", 
   "Some flakiness in the DNS subsystem cause one of the threads to get stuck in the lookup and the synchronized call at:", 
   "ServerManager.java:528", 
   "processMsgs() {", 
   "...", 
   "synchronized (this.master.getRegionManager()) {", 
   "// does dns lookup", 
   "}", 
   "}", 
   "The offending stack trace was:", 
   "\"IPC Server handler 232 on 60000\" daemon prio=10 tid=0x00007fcb64164000 nid=0x7d16 runnable [0x0000000052e7f000]", 
   "java.lang.Thread.State: RUNNABLE", 
   "at java.net.Inet4AddressImpl.lookupAllHostAddr(Native Method)", 
   "at java.net.InetAddress$1.lookupAllHostAddr(InetAddress.java:849)", 
   "at java.net.InetAddress.getAddressFromNameService(InetAddress.java:1200)", 
   "at java.net.InetAddress.getAllByName0(InetAddress.java:1153)", 
   "at java.net.InetAddress.getAllByName0(InetAddress.java:1128)", 
   "at java.net.InetAddress.getHostFromNameService(InetAddress.java:550)", 
   "at java.net.InetAddress.getHostName(InetAddress.java:476)", 
   "at java.net.InetAddress.getHostName(InetAddress.java:448)", 
   "at java.net.InetSocketAddress.getHostName(InetSocketAddress.java:210)", 
   "at org.apache.hadoop.hbase.HServerAddress.getHostname(HServerAddress.java:117)", 
   "at org.apache.hadoop.hbase.master.RegionManager.regionsAwaitingAssignment(RegionManager.java:469)", 
   "at org.apache.hadoop.hbase.master.RegionManager.assignRegions(RegionManager.java:263)", 
   "at org.apache.hadoop.hbase.master.ServerManager.processMsgs(ServerManager.java:500)", 
   "- locked <0x00007fcb985b2030> (a org.apache.hadoop.hbase.master.RegionManager)", 
   "at org.apache.hadoop.hbase.master.ServerManager.processRegionServerAllsWell(ServerManager.java:425)", 
   "at org.apache.hadoop.hbase.master.ServerManager.regionServerReport(ServerManager.java:335)", 
   "at org.apache.hadoop.hbase.master.HMaster.regionServerReport(HMaster.java:841)", 
   "at sun.reflect.GeneratedMethodAccessor15.invoke(Unknown Source)", 
   "at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)", 
   "at java.lang.reflect.Method.invoke(Method.java:597)", 
   "at org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:585)", 
   "at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:933)", 
   "Reviewed By:kannan", 
   "Test Plan:Tested on Titan clusters 15 and 16", 
   "Revert Plan:OK", 
   "Differential Revision: 352964", 
   "- begin *PUBLIC* platform impact section -", 
   "Bugzilla: #", 
   "- end platform impact -"
  ], 
  "revision_id": "1202979"
 }, 
 {
  "author": "nspiegelberg", 
  "date": "2011-11-17T01:44:03.611576Z", 
  "msg": [
   "Fix TestHeapSize broken by removing an unused field from HRegion in rH19729", 
   "Summary: In rH19729 I removed an unused field from HRegion, which broke", 
   "TestHeapSize. In this patch I am fixing the unit tests and cleaning up a couple", 
   "of lines in HRegion as well.", 
   "Test Plan: Run unit tests", 
   "Reviewers: liyintang, kannan", 
   "Reviewed By: kannan", 
   "CC: hbase-eng@lists, kannan", 
   "Differential Revision: 352643", 
   "Revert Plan: OK"
  ], 
  "revision_id": "1202978"
 }, 
 {
  "author": "nspiegelberg", 
  "date": "2011-11-17T01:43:51.501960Z", 
  "msg": [
   "HBASE-4686 [jira] [89-fb] Fix per-store metrics aggregation", 
   "Summary:", 
   "In r1182034 per-Store metrics were broken, because the aggregation of", 
   "StoreFile metrics over all stores in a region was replaced by overriding", 
   "them every time. We saw these metrics drop by a factor of numRegions on", 
   "a production cluster; thanks to Kannan for noticing this!  We need to", 
   "fix the metrics and add a unit test to ensure regressions like this", 
   "don't happen in the future.", 
   "This patch is in the public Phabricator: https://reviews.facebook.net/D87", 
   "Test Plan:", 
   "Tasks:", 
   "Reviewed By: liyintang", 
   "Reviewers: liyintang", 
   "Revert plan:", 
   "OK", 
   "Commenters:", 
   "CC: hbase-eng@lists.facebook.com"
  ], 
  "revision_id": "1202977"
 }, 
 {
  "author": "nspiegelberg", 
  "date": "2011-11-17T01:43:31.293248Z", 
  "msg": [
   "process splitLog() errors", 
   "Summary:", 
   "1. At startup the splitLog() errors are only ignored if", 
   "hbase.hlog.split.skip.errors property is set to true (default = true). This is a", 
   "pre-existing property which is set to false in titan configs.", 
   "2. In ProcessServerShutdown the splitLog() exceptions are not ignored.", 
   "(splitLog() itself might not throw an exception on a corrupted log file if", 
   "hbase.hlog.split.skip.errors is set to true). If splitLog() fails, then the", 
   "region-operation is requeued.", 
   "Test Plan:", 
   "most of the unit tests have so far passed. still running.", 
   "==", 
   "namenode kill test", 
   "killed namenode", 
   "all the regionservers died", 
   "as expected, the first rs znode expiry killed the master as well. Verified from", 
   "master logs that on znode expiry following happens", 
   "- attempt to splitlogs that fail", 
   "- requeue region op", 
   "- check fs state that forces master to abort", 
   "then restarted namenode and HBase. all the logs got properly processed. No", 
   "loadtest errors, only saw failuers.", 
   "==", 
   "create some log files and kill the hbase processes.", 
   "to force a log-splitting failure touchz a file in the .logs directory with the", 
   "name of an existing log-directory appended with -splitting. The first step where", 
   "the log-directory is renamed to *-splitting will fail.", 
   "saw that the master didn't complete the startup sequence. Got stuck in", 
   "splitLogAtStatrtup. No region assignments happned.", 
   "removed the offending file from the .logs directory and the master proceeded to", 
   "split the logs and assign regions.", 
   "Reviewers: kannan, liyintang", 
   "Reviewed By: kannan", 
   "CC: hbase-eng@lists, kannan, pkhemani", 
   "Differential Revision: 350815", 
   "Task ID: 772146"
  ], 
  "revision_id": "1202976"
 }
]