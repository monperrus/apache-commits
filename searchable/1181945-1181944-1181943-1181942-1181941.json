[
 {
  "author": "nspiegelberg", 
  "date": "2011-10-11T17:43:28.115015Z", 
  "msg": [
   "Backporting Filter Language diff from hbase-90.", 
   "Also includes support of the Filter Language from the HBase shell", 
   "Summary:", 
   "Committed https://phabricator.fb.com/D277637 and", 
   "https://phabricator.fb.com/D300515 to hbase-90.", 
   "This diff is pretty similar.", 
   "Test Plan:", 
   "TestParseFilter.java", 
   "Tested manually from the shell.", 
   "hbase(main):003:0> scan 'conf', {FILTER => \"KeyOnlyFilter()\"}", 
   "ROW COLUMN+CELL", 
   "realtime domain_threshold_imp's column=conf:number, timestamp=1311055899185,", 
   "value=", 
   "realtime domain_threshold_imp's column=conf:sameplesize,", 
   "timestamp=1310962821624, value=", 
   "realtime domain_threshold_imps column=conf:sameplesize,", 
   "timestamp=1310962794886, value=", 
   "realtime_domain_acts column=conf:blacklist, timestamp=1310667339990, value=", 
   "realtime_domain_acts column=conf:daily_thresholds, timestamp=1310667461494,", 
   "value=", 
   "hbase(main):002:0> scan 'conf', {FILTER =>", 
   "org.apache.hadoop.hbase.filter.KeyOnlyFilter.new()}", 
   "ROW COLUMN+CELL", 
   "realtime domain_threshold_imp's column=conf:number, timestamp=1311055899185,", 
   "value=", 
   "realtime domain_threshold_imp's column=conf:sameplesize,", 
   "timestamp=1310962821624, value=", 
   "realtime domain_threshold_imps column=conf:sameplesize,", 
   "timestamp=1310962794886, value=", 
   "realtime_domain_acts column=conf:blacklist, timestamp=1310667339990, value=", 
   "realtime_domain_acts column=conf:daily_thresholds, timestamp=1310667461494,", 
   "value=", 
   "hbase(main):005:0> scan 'conf', {FILTER => \"(FirstKeyOnlyFilter() AND", 
   "ValueFilter(>=, 'binary:ghi')) OR TimestampsFilter(1311109736514)\"}", 
   "ROW COLUMN+CELL", 
   "realtime domain_threshold_imp\\'s column=conf:sameplesize,", 
   "timestamp=1310970483721, value=nonononono", 
   "realtime domain_threshold_imps column=conf:sameplesize,", 
   "timestamp=1310962794886, value=nonononono", 
   "realtime_domain_acts column=conf:blacklist, timestamp=1310667339990,", 
   "value=hello", 
   "row1 column=conf:number, timestamp=1311109736514, value=short_row", 
   "Reviewed By: liyintang", 
   "Reviewers: pkhemani, jgray, liyintang, kannan, kranganathan, nspiegelberg", 
   "CC: hbase@lists, liyintang", 
   "Differential Revision: 301887"
  ], 
  "revision_id": "1181945"
 }, 
 {
  "author": "nspiegelberg", 
  "date": "2011-10-11T17:43:22.546683Z", 
  "msg": [
   "Adding a script to check if table descriptors for each region in META for a given table are consistent.", 
   "Summary: This script compares the table descriptors in META for all regions of", 
   "a particular table to the table's descriptor (which is just the descriptor for", 
   "the first region).", 
   "Test Plan: Tested on dev cluster.", 
   "Reviewed By: kannan", 
   "Reviewers: kannan, nspiegelberg", 
   "CC: nileema, kannan, madhuvaidya", 
   "Differential Revision: 308037"
  ], 
  "revision_id": "1181944"
 }, 
 {
  "author": "nspiegelberg", 
  "date": "2011-10-11T17:43:20.393684Z", 
  "msg": [
   "Fixing a parallel locality check issue", 
   "Summary:", 
   "Solved the block location map clearing issue, added some extra useful logging", 
   "on errors and implemented option passing to the locality checker to override", 
   "options on the fly. Also circumvented some more possible NPEs.", 
   "Also noticed that despite reporting that we are going through a number of", 
   "regions (Regions scanned), we actually have roughly twice as many reported files", 
   "we are accessing, so the reporting might be a bit misleading...", 
   "Test Plan:", 
   "I tested it on DL and everything worked pretty much as expected for the number", 
   "of threads used:", 
   "1)   202323 ms", 
   "2)   92715 ms", 
   "3)   70758 ms", 
   "4)   51976 ms", 
   "5)   45343 ms", 
   "Reviewed By: kannan", 
   "Reviewers: kannan, liyintang", 
   "Commenters: liyintang", 
   "CC: hbase@lists, achao, kannan, liyintang, bogdan", 
   "Blame Revision: D283312", 
   "Differential Revision: 308045"
  ], 
  "revision_id": "1181943"
 }, 
 {
  "author": "nspiegelberg", 
  "date": "2011-10-11T17:43:17.441782Z", 
  "msg": [
   "Fix the runtime exception when entrySet() is called in SoftValueSortedMap.", 
   "Summary:", 
   "Currently SoftValueSortedMap.entrySet() tries to iteraate through the entry set", 
   "of the underlying map, and put all the values (SoftValue<K,V>) to a newly", 
   "created TreeSet<Entry<K,V>>. Because the entry set of SortedMap is already", 
   "sorted, so it's not necessary to have a TreeSet to sort those entries again", 
   "upon adding. This gets rid of the runtime class cast exception because it does", 
   "not require comparing anymore.", 
   "Test Plan:", 
   "Without the fix, instantiate a SoftValueSortedMap and put three entries in it,", 
   "call entrySet().size() would cause it to throw a runtime ClassCastException;", 
   "after the fix, it correctly outputs all entries in the sorted order  without", 
   "exceptions.", 
   "Reviewed By: liyintang", 
   "Reviewers: liyintang, kannan", 
   "Commenters: kannan", 
   "CC: hbase@lists, liyintang, kannan", 
   "Differential Revision: 308206", 
   "Task ID: 679712"
  ], 
  "revision_id": "1181942"
 }, 
 {
  "author": "nspiegelberg", 
  "date": "2011-10-11T17:43:14.904564Z", 
  "msg": [
   "Implementing a ThreadPool to parallelize startup region-locality HDFS scans", 
   "Summary: By using a ThreadPool we can turn the formerly serialized scans of", 
   "HDFS into a parallel operation. Special care was taken to ensure that if any", 
   "operation fails, the scans are stopped abruptly and the exception is thrown to a", 
   "higher level.", 
   "Test Plan: The mechanism is still the same, so to test that it works, one", 
   "should just start up the cluster and check with the locality checker that Liyin", 
   "created, as before.", 
   "Reviewed By: liyintang", 
   "Reviewers: liyintang, kannan, nspiegelberg", 
   "Commenters: kannan, nspiegelberg", 
   "CC: hbase@lists, kannan, liyintang, nspiegelberg, bogdan", 
   "Differential Revision: 283312", 
   "Task ID: 620114", 
   "Conflicts:", 
   "src/main/java/org/apache/hadoop/hbase/util/FSUtils.java"
  ], 
  "revision_id": "1181941"
 }
]