[
 {
  "author": "gstein", 
  "date": "2009-09-04T06:43:58.727752Z", 
  "msg": [
   "Revamp some sqlite-related functionality: specifying statements, upgrade", 
   "handling, and trimming unused APIs.", 
   "Of particular note is the statement handling. The SQL statements are now", 
   "moved into the .sql file and preprocessed by the transform_sql.py script.", 
   "This allows the same statement indexes to be used by *all* users of the", 
   "particular schema. The prior idiom could lead to two files with different", 
   "ideas of what statement index 5 represented, and based on who opened the", 
   "database. We also get nifty SQL syntax highlighting now.", 
   "* subversion/include/private/svn_sqlite.h:", 
   "(svn_sqlite__upgrade_func_t): removed. no longer used.", 
   "(svn_sqlite__open): remove the upgrade callback. callers should handle", 
   "upgrading \"manually\"", 
   "(svn_sqlite__transaction_being, svn_sqlite__transaction_commit,", 
   "svn_sqlite__transaction_rollback): removed. unused. callers have", 
   "been using the with_transaction API.", 
   "* subversion/libsvn_subr/sqlite.c:", 
   "(svn_sqlite__transaction_being, svn_sqlite__transaction_commit,", 
   "svn_sqlite__transaction_rollback): removed.", 
   "(struct upgrade_baton): remove UPGRADE_FUNC and UPGRADE_BATON members", 
   "(upgrade_format): no longer call the upgrade callback", 
   "(check_format): remove the UPGRADE_FUNC and UPGRADE_BATON params. adjust", 
   "the upgrade_format baton.", 
   "(svn_sqlite__open): remove the UPGRADE_FUNC and UPGRADE_BATON params.", 
   "update call to check_format.", 
   "(svn_sqlite__with_transaction): inline the SQL statements rather than", 
   "using the transaction wrappers", 
   "* subversion/tests/libsvn_wc/db-test.c:", 
   "(create_fake_wc): remove the upgrade func/baton from the sqlite open call.", 
   "* subversion/libsvn_wc/wc-metadata.sql:", 
   "(STMT_*): new statements collected from wc_db.c, entries.c, and", 
   "upgrade.c. note that wc_db.c and entries.c each defined a slightly", 
   "different STMT_INSERT_BASE_NODE. rename entries' version to", 
   "STMT_INSERT_BASE_NODE_FOR_ENTRY.", 
   "* subversion/libsvn_wc/wc_db.c:", 
   "(enum statement_keys): removed", 
   "(statements[]): now declared/defined using the DECLARE_STATEMENTS macro", 
   "constructed by transform_sql", 
   "(svn_wc__db_upgrade_func): removed. unused.", 
   "(open_db): small wrapper around sqlite__open to deal with wc-specific", 
   "values. no longer pass upgrade_func to the open.", 
   "(parse_local_abspath, create_db): switch to use open_db()", 
   "(get_statement_for_path): swich STMT_IDX to a simple integer", 
   "(svn_wc__db_temp_get_sdb): no longer take a file-specific set of", 
   "statements, since these are now \"global\". use open_db()", 
   "* subversion/libsvn_wc/wc_db.h:", 
   "(svn_wc__db_upgrade_func): removed.", 
   "(svn_wc__db_temp_get_sdb): no longer take statements", 
   "* subversion/libsvn_wc/entries.c:", 
   "(enum statement_keys, statements[]): removed.", 
   "(read_entries_new, svn_wc__entries_write_new): no longer pass statements", 
   "to temp_get_sdb().", 
   "(insert_base_node): our STMT_INSERT_BASE_NODE was slightly different", 
   "from that of wc_db.c, so it was renamed to", 
   "STMT_INSERT_BASE_NODE_FOR_ENTRY. track that change.", 
   "* subversion/libsvn-wc/upgrade.c:", 
   "(...): add some clarifying comments", 
   "(migrate_single_tree_conflict_data): no longer take INSERT_STMT since we", 
   "can easily grab it from the database.", 
   "(migrate_tree_conflicts): no longer manually define/prepare statements,", 
   "but just include them into the \"global\" set of statements. stop", 
   "resetting the SELECT and just process all rows at once; SQLite has", 
   "been able to support that for a while. wipe out all conflict data in a", 
   "single UPDATE statement, rather than one row at a time.", 
   "* subversion/libsvn_fs_fs/rep-cache.c:", 
   "(enum statement_keys): removed", 
   "(statements[]): switch to using DECLARE_STATEMENTS for this", 
   "(svn_fs_fs__open_rep_cache): no longer pass UPGRADE_FUNC/BATON to the", 
   "sqlite__open call.", 
   "* subversoin/libsvn_fs_fs/rep-cache-db.sql:", 
   "(STMT_*): new statements, pulled from rep-cache.c", 
   "* build/transform_sql.py:", 
   "(main): add detection of STMT_* directives, generating appropriate", 
   "output for each one. at the end of the generated header, include a new", 
   "DECLARE_STATEMENTS macro to declare/define all the statements"
  ], 
  "revision_id": "879210"
 }, 
 {
  "author": "gstein", 
  "date": "2009-09-04T06:04:08.996671Z", 
  "msg": [
   "Add a utility function to detect if a node is \"replaced\", like the old", 
   "schedule_replace value. Uses only the wc-ng idioms.", 
   "* subversion/libsvn_wc/wc.h:", 
   "(svn_wc__internal_is_replaced): new declaration", 
   "* subversion/libsvn_wc/questions.c:", 
   "(svn_wc__internal_is_replaced): new implementation", 
   "* subversion/libsvn_wc/props.c:", 
   "(svn_wc__load_props): the \"replaced\" logic did not test for the", 
   "'not-present' condition of the BASE node, so it was incorrect. use the", 
   "new svn_wc__internal_is_replaced function instead.", 
   "(svn_wc__props_modifed): the \"replaced\" logic was wildly off-base here,", 
   "so use the new utility function."
  ], 
  "revision_id": "879209"
 }, 
 {
  "author": "julianfoad", 
  "date": "2009-09-04T00:46:33.792053Z", 
  "msg": [
   "* notes/locking/TODO.txt: Fix typos."
  ], 
  "revision_id": "879208"
 }, 
 {
  "author": "julianfoad", 
  "date": "2009-09-04T00:35:49.260184Z", 
  "msg": [
   "Fix issue #3436: add a short option for --ignore-externals.", 
   "Instead of using the suggested -i, markphip suggested --ie", 
   "which is what is implemented, in accordance to the discussion at", 
   "<http://subversion.tigris.org/ds/viewMessage.do?dsMessageId=2370618&dsForumId=462>.", 
   "* subversion/svn/main.c", 
   "(svn_cl__options): Add a new option \"--ie\" as an alias of", 
   "\"--ignore-externals\", and mention it in the option's help text.", 
   "* subversion/tests/cmdline/getopt_tests_data/svn_help_log_switch_stdout", 
   "Adjust the expected help text accordingly.", 
   "Patch by: Edmund Wong <ed{_AT_}kdtc.net>", 
   "Suggested by: markphip", 
   "danielsh", 
   "stsp", 
   "me"
  ], 
  "revision_id": "879207"
 }, 
 {
  "author": "neels", 
  "date": "2009-09-04T00:20:03.625302Z", 
  "msg": [
   "Rearrange three cmdline tests into two, use a helper function to create a", 
   "common repos / wc situation. Tweak their descriptions.", 
   "* subversion/tests/cmdline/merge_tests.py", 
   "(merge_replace_setup): New helper function.", 
   "(merge_replace_causes_tree_conflict): Use merge_replace_setup().", 
   "Tweak description.", 
   "(merge_replace_causes_tree_conflict2): Use merge_replace_setup() and", 
   "integrate merge_replace_causes_tree_conflict3() into this test.", 
   "Tweak description.", 
   "(merge_replace_causes_tree_conflict3, test_list):", 
   "Remove test merge_replace_causes_tree_conflict3()."
  ], 
  "revision_id": "879206"
 }
]