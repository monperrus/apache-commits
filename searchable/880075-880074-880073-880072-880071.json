[
 {
  "author": "gstein", 
  "date": "2009-10-13T20:55:02.154425Z", 
  "msg": [
   "Followup to r40000. It appears that the database gets into a state where", 
   "the BASE_NODE and WORKING_NODE rows are both in the 'incomplete' state.", 
   "For now, we'll allow this. In the long-term nothing should be messing", 
   "around if the BASE tree is incomplete.", 
   "* subversion/libsvn_wc/wc_db.c:", 
   "(svn_wc__db_read_info): allow incomplete/* as valid presences"
  ], 
  "revision_id": "880075"
 }, 
 {
  "author": "gstein", 
  "date": "2009-10-13T20:05:18.555515Z", 
  "msg": [
   "Move all of the log files' contents into the work queue, using a new", 
   "\"loggy\" work item. This also revamps anywhere we look for a log file, and", 
   "(instead) we see if there is something remaining in the work queue.", 
   "* subversion/libsvn_wc/workqueue.h:", 
   "(svn_wc__wq_add_loggy): add a work-item to run an old loggy operation", 
   "* subversion/libsvn_wc/workqueue.c:", 
   "(OP_LOGGY): new operation", 
   "(run_loggy): new handler to extract the XML from the work-item and pass", 
   "it over to the old loggy system", 
   "(svn_wc__wq_add_loggy): queue up a new OP_LOGGY", 
   "(dispatch_table): add the new handler", 
   "(svn_wc__wq_run): make sure the directory is still there before running", 
   "anything from it (so we don't get the parent dir's stuff!)", 
   "* subversion/libsvn_wc/log.h:", 
   "(svn_wc__write_log, svn_wc__logfile_present): removed. no longer used.", 
   "(svn_wc__run_xml_log): new function for the work queue to call to", 
   "process an xml-based loggy operation", 
   "* subversion/libsvn_wc/log.c:", 
   "(log_do_modify_entry): remove an unused KIND localvar", 
   "(compute_logfile_path): removed. unused.", 
   "(run_log): renamed to ...", 
   "(svn_wc__run_xml_log): ... this. we no longer iterate over log files,", 
   "nor read them into memory. just use the new LOG_CONTENTS/LOG_LEN", 
   "parameters to pass into the XML parser. no need to remove log files", 
   "either. and we don't have to run the workqueue since we're now being", 
   "called from that", 
   "(svn_wc__run_log): run the workqueue instead", 
   "(svn_wc__run_log2): run the workqueue instead. just bail if we don't", 
   "have an access baton. (meaning no write lock, which is bad, but that's", 
   "what is going on now...)", 
   "(svn_wc__write_log, svn_wc__logfile_present): removed", 
   "(cleanup_internal): run the workqueue instead", 
   "* subversion/libsvn_wc/adm_ops.c:", 
   "(process_committed_leaf): remove the LOG_NUMBER param, and take a DB.", 
   "queue a loggy operation instead of writing a log.", 
   "(process_committed_internal): remove the LOG_NUMBER param in favor of a", 
   "DB parameter. adjust calls to self and to process_committed_leaf().", 
   "(svn_wc_process_committed_queue): adjust call to", 
   "process_committed_internal. constify THIS_ADM in the processing loop,", 
   "and call run_log2() instead of run_log.", 
   "(svn_wc_process_committed4): adjust call to process_committed_internal", 
   "and call run_log2() instead", 
   "(svn_wc_delete4): call wq_add_loggy() instead of write_log()", 
   "* subversion/libsvn_wc/lock.c:", 
   "(pool_cleanup): try fetching a work item to see if there is anything in", 
   "the work queue, for lock preservation.", 
   "* subversion/libsvn_wc/merge.c:", 
   "(svn_wc_merge4): queue the loggy operation rather than using write_log.", 
   "use run_log2() instead of run_log.", 
   "* subversion/libsvn_wc/props.c:", 
   "(svn_wc_merge_props3): queue the loggy op, and switch to run_log2.", 
   "* subversion/libsvn_wc/update_editor.c:", 
   "(struct dir_baton): add a DB field for grotesque reasons, and remove the", 
   "LOG_NUMBER field.", 
   "(flush_log): queue the loggy operation, rather than calling write_log", 
   "(cleanup_dir_baton): simplify logic, don't worry about LOG_NUMBER. leave", 
   "a comment about the funky stink here.", 
   "(make_dir_baton): initialize the 'db' field, and not 'log_number'", 
   "(complete_directory): don't worry about log numbers", 
   "(do_entry_deletion): remove the LOG_NUMBER parameter. queue the loggy", 
   "operation rather than using write_log.", 
   "(delete_entry): adjust call to do_entry_deletion()", 
   "(close_directory): don't re-init the 'log_number' field", 
   "(close_edit): don't worry about log numbers, and adjust the call to", 
   "do_entry_deletion()", 
   "(svn_wc_add_repos_file4): queue the loggy operation instead of", 
   "write_log, and add an svn_error_return.", 
   "* subversion/libsvn_wc/upgrade.c:", 
   "(upgrade_to_wcng): manually look for an old log file, rather than the", 
   "obsolete svn_wc__logfile_present() function."
  ], 
  "revision_id": "880074"
 }, 
 {
  "author": "hwright", 
  "date": "2009-10-13T19:40:35.547988Z", 
  "msg": [
   "Remove the 1.6.x-r37953 branch, reintegrated in r39998.", 
   "(Even though it's removed from HEAD, this branch will forever remain in infamy", 
   "as the branch which caused at least a couple wasted hours while I hunted down a", 
   "phantom bug in FSFS.  Turns out, I'd just fat fingered the branch name [and", 
   "copy-and-paste'd that error across terminals].)"
  ], 
  "revision_id": "880073"
 }, 
 {
  "author": "hwright", 
  "date": "2009-10-13T19:37:19.007405Z", 
  "msg": [
   "Reintegrate the 1.6.x-r37953 branch:", 
   "* r37953", 
   "Merge a NULL-dereference fix made in r37953.", 
   "Justification:", 
   "Fixes the crash reported by Peter Samuelson in", 
   "http://svn.haxx.se/dev/archive-2009-09/0575.shtml", 
   "Notes:", 
   "r37953 made many more changes to the affected file, this is just", 
   "the NULL pointer fix. We may want to merge more of r37953 in the future,", 
   "but that's a different beast and we should fix just the crash ASAP.", 
   "Branch:", 
   "^/branches/1.6.x-r37953", 
   "Votes:", 
   "+1: stsp, hwright, pburba"
  ], 
  "revision_id": "880072"
 }, 
 {
  "author": "danielsh", 
  "date": "2009-10-13T19:19:00.864536Z", 
  "msg": [
   "In svn-rep-sharing-stats, count the number of shares actually happening", 
   "rather than the total potential number of shares.  (This matters when", 
   "rep-sharing wasn't enabled during the entire history of the filesystem.)", 
   "As a side effect, refactor the use of hashes to use proper keys, values,", 
   "allocations, and counters; counters overloaded into pointers-to-char are", 
   "gone", 
   "* tools/server-side/svn-rep-sharing-stats.c", 
   "(INITIAL_VALUE):  Remove.", 
   "(struct key_t, struct value_t):  New.", 
   "(record):  Use key_t and value_t instead of checksum cstring and", 
   "unsigned int cast to char *.", 
   "(process_one_revision, pretty_print):  Update docstrings' description of", 
   "the hashes.", 
   "(pretty_print):  Fetch keys/values from the hash as key_t and value_t."
  ], 
  "revision_id": "880071"
 }
]